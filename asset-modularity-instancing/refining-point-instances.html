

<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Refining Point Instances &#8212; Learn OpenUSD</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/nvidia-sphinx-theme.css?v=df3ac72c" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/lousd_custom.css?v=9deb43b2" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=ca842793"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'asset-modularity-instancing/refining-point-instances';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OpenUSD Instancing Frequently Asked Questions" href="instancing-faq.html" />
    <link rel="prev" title="Exercise: Authoring Point Instancing" href="authoring-point-instancing/exercise-authoring-point-instancing.html" />

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />


    <script src="https://assets.adobedtm.com/5d4962a43b79/c1061d2c5e7b/launch-191c2462b890.min.js" ></script>
    


  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="Learn OpenUSD - Home"/>
    <img src="../_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="Learn OpenUSD - Home"/>
  
  
    <p class="title logo__title">Learn OpenUSD</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/NVIDIA-Omniverse/LearnOpenUSD" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        



  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="Learn OpenUSD - Home"/>
    <img src="../_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="Learn OpenUSD - Home"/>
  
  
    <p class="title logo__title">Learn OpenUSD</p>
  
</a>


  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/NVIDIA-Omniverse/LearnOpenUSD" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">



<nav class="bd-docs-nav bd-links"
     aria-label="Table of Contents">
  <p class="bd-links__title" role="heading" aria-level="1">Table of Contents</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../what-openusd/index.html">What Is OpenUSD?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../why-openusd-developer-certification.html">Why Get Certified</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../stage-setting/index.html">Setting the Stage</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../stage-setting/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage-setting/stage.html">Stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage-setting/prims.html">Prims</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../stage-setting/properties/index.html">Properties</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../stage-setting/properties/attributes.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stage-setting/properties/relationships.html">Relationships</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../stage-setting/timecodes-timesamples.html">TimeCodes and TimeSamples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage-setting/prim-property-paths.html">Prim and Property Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage-setting/usd-file-formats.html">OpenUSD File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage-setting/usd-modules.html">OpenUSD Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage-setting/metadata.html">Metadata</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../scene-description-blueprints/index.html">Scene Description Blueprints</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../scene-description-blueprints/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene-description-blueprints/schemas.html">Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene-description-blueprints/scope.html">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene-description-blueprints/xform.html">Xform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene-description-blueprints/xformcommonapi.html">XformCommonAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene-description-blueprints/lights.html">Lights</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../composition-basics/index.html">Composition Basics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../composition-basics/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../composition-basics/layers.html">Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../composition-basics/strength-ordering.html">Composition Arcs and Strength Ordering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../composition-basics/specifiers.html">Specifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../composition-basics/references.html">Referencing Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../composition-basics/default-prim.html">Default Prim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../composition-basics/variant-sets.html">Variant Sets Basics</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../beyond-basics/index.html">Beyond the Basics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../beyond-basics/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beyond-basics/primvars.html">Primvars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beyond-basics/value-resolution.html">Value Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beyond-basics/custom-properties.html">Custom Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beyond-basics/active-inactive-prims.html">Active and Inactive Prims</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beyond-basics/model-kinds.html">Model Kinds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beyond-basics/stage-traversal.html">Stage Traversal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beyond-basics/hydra.html">Hydra</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../creating-composition-arcs/index.html">Creating Composition Arcs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../creating-composition-arcs/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating-composition-arcs/setup.html">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating-composition-arcs/prim-composition.html">What Is Prim Composition?</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../creating-composition-arcs/sublayers/index.html">Sublayers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/sublayers/what-are-sublayers.html">What Are Sublayers?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/sublayers/working-with-sublayers.html">Exercise: Working with Sublayers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/sublayers/sublayers-faq.html">Sublayers FAQ</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../creating-composition-arcs/references-payloads/index.html">References and Payloads</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/references-payloads/what-are-references.html">What Are References?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/references-payloads/working-with-references.html">Exercise: Working With References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/references-payloads/references-faq.html">References FAQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/references-payloads/what-are-payloads.html">What Are Payloads?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/references-payloads/working-with-payloads.html">Exercise: Working With Payloads</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../creating-composition-arcs/encapsulation/index.html">Encapsulation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/encapsulation/what-is-encapsulation.html">What Is Encapsulation?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/encapsulation/experimenting-with-encapsulation.html">Exercise: Experimenting With Encapsulation</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../creating-composition-arcs/variant-sets/index.html">Variant Sets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/variant-sets/what-are-variant-sets.html">What Are Variant Sets?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/variant-sets/working-with-variant-sets.html">Exercise: Working With Variant Sets</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../creating-composition-arcs/inherits-specializes/index.html">Inherits and Specializes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/inherits-specializes/what-is-inherits.html">What Is Inherits?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/inherits-specializes/experimenting-with-inherits.html">Exercise: Experimenting With Inherits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/inherits-specializes/what-is-specializes.html">What Is Specializes?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/inherits-specializes/experimenting-with-specializes.html">Exercise: Experimenting With Specializes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/inherits-specializes/encapsulation-refinement.html">Encapsulation and Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/inherits-specializes/experimenting-with-encapsulation-refinement.html">Exercise: Experimenting With Encapsulation and Refinement</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../creating-composition-arcs/strength-ordering/index.html">LIVERPS Strenth Ordering</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/strength-ordering/what-is-liverps.html">What Is LIVERPS?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-composition-arcs/strength-ordering/tracing-through-liverps.html">Tracing Through LIVERPS</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../asset-structure/index.html">Asset Structure Principles and Content Aggregation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../asset-structure/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asset-structure/setup.html">Setup</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../asset-structure/asset-structure-principles/index.html">Principles of Asset Structure</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-structure-principles/why-necessary.html">Why Is an Asset Structure Necessary?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-structure-principles/asset-interface-pt1.html">What Is an Asset Interface?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-structure-principles/your-first-asset.html">Exercise: Your First Asset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-structure-principles/asset-interface-pt2.html">What Is an Asset Interface? (Part 2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-structure-principles/encapsulating-your-asset.html">Exercise: Encapsulating Your Asset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-structure-principles/asset-interface-pt3.html">What Is an Asset Interface? (Part 3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-structure-principles/organizing-prim-hierarchy.html">Exercise: Organizing Prim Hierarchy</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../asset-structure/workstreams/index.html">Workstreams</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/workstreams/modeling-workstreams.html">Modeling Workstreams With Layer Stacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/workstreams/adding-user-workstreams.html">Exercise: Adding User Workstreams</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../asset-structure/asset-parameterization/index.html">Asset Parameterization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-parameterization/what-is-asset-parameterization.html">What Is Asset Parameterization?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/asset-parameterization/exercise-asset-parameterization.html">Exercise: Asset Parameterization</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../asset-structure/reference-payload-pattern/index.html">Reference/Payload Pattern</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/reference-payload-pattern/what-is-ref-payload-pattern.html">What Is Reference/Payload Pattern?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/reference-payload-pattern/exercise-ref-payload-pattern.html">Exercise: Reference/Payload Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/reference-payload-pattern/lofting-primvars.html">Exercise: Lofting Primvars</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/reference-payload-pattern/lofting-variant-sets.html">Exercise: Lofting Variant Sets</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../asset-structure/model-hierarchy/index.html">Model Hierarchy</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/model-hierarchy/what-are-model-kinds.html">What Are Model Kinds?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/model-hierarchy/exercise-components.html">Exercise: Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/model-hierarchy/exercise-assemblies.html">Exercise: Assemblies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/model-hierarchy/model-hierarchy-considerations.html">Model Hierarchy Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/model-hierarchy/exercise-groups.html">Exercise: Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-structure/model-hierarchy/exercise-variation-workstream.html">Exercise: Variation Workstream</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data-exchange/index.html">Developing Data Exchange Pipelines</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../data-exchange/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-exchange/setup.html">Setup</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data-exchange/data-exchange/index.html">Data Exchange</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/data-exchange/what-is-data-exchange.html">What Is Data Exchange?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/data-exchange/exercise.html">Exercise: Anatomy of a Converter</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data-exchange/data-extraction/index.html">Data Extraction</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/data-extraction/what-is-data-extraction.html">What Is Data Extraction?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/data-extraction/exercise-extracting-geometry.html">Exercise: Extracting Geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/data-extraction/exercise-extracting-materials.html">Exercise: Extracting Materials</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data-exchange/asset-validation/index.html">Asset Validation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/asset-validation/what-is-asset-validation.html">What Is Asset Validation?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/asset-validation/exercise-asset-validation-testing.html">Exercise: Asset Validation and Testing</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data-exchange/data-transformation/index.html">Data Transformation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/data-transformation/what-is-data-transformation.html">What Is Data Transformation?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/data-transformation/transformation-hierarchy.html">Exercise: Transforming the Prim Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/data-transformation/exercise-export-option.html">Exercise: Adding an Export Option</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Asset Modularity and Instancing</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="asset-modularity/index.html">Asset Modularity</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="asset-modularity/what-is-asset-modularity.html">What Is Asset Modularity?</a></li>
<li class="toctree-l3"><a class="reference internal" href="asset-modularity/exercise-assets-overview.html">Exercise: Assets Overview</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="what-is-instancing.html">What Is Instancing?</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="authoring-scenegraph-instancing/index.html">Authoring Scenegraph Instancing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="authoring-scenegraph-instancing/scenegraph-instancing-intro.html">Introduction to Scenegraph Instancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="authoring-scenegraph-instancing/exercise-authoring-scenegraph-instancing.html">Exercise: Author Scenegraph Instancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="authoring-scenegraph-instancing/nested-instancing.html">Nested Instancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="authoring-scenegraph-instancing/exercise-nested-instancing.html">Exercise: Nested Scenegraph Instancing</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="refining-scenegraph-instances/index.html">Refining Scenegraph Instances</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="refining-scenegraph-instances/scenegraph-instance-refinement.html">Introduction to Scenegraph Instance Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="refining-scenegraph-instances/scenegraph-deinstance-refinement.html">Deinstancing Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="refining-scenegraph-instances/scenegraph-variant-set-refinement.html">Refinement Using Variant Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="refining-scenegraph-instances/scenegraph-hierarchical-refinement.html">Hierarchical Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="refining-scenegraph-instances/scenegraph-ad-hoc-arcs-refinement.html">Ad Hoc Arcs Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="refining-scenegraph-instances/scenegraph-broadcasted-refinement.html">Broadcasted Refinement</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="authoring-point-instancing/index.html">Authoring Point Instancing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="authoring-point-instancing/point-instancing-intro.html">Introduction to Point Instancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="authoring-point-instancing/exercise-authoring-point-instancing.html">Exercise: Authoring Point Instancing</a></li>
</ul>
</details></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Refining Point Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="instancing-faq.html">Instancing FAQ</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Common Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../usdview-install-instructions.html">Installing usdview and Setting Up Python</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Involved</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://github.com/NVIDIA-Omniverse/LearnOpenUSD">Contribute</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NVIDIA-Omniverse/LearnOpenUSD/issues/new">Report an Issue</a></li>
<li class="toctree-l1"><a class="reference external" href="https://forum.aousd.org">Join the Community</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>



      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Asset Modularity and Instancing</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Refining Point Instances</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="refining-point-instances">
<h1>Refining Point Instances<a class="headerlink" href="#refining-point-instances" title="Link to this heading">#</a></h1>
<section id="refinement-using-primvars">
<h2>Refinement Using Primvars<a class="headerlink" href="#refinement-using-primvars" title="Link to this heading">#</a></h2>
<p>Primvars using <code class="docutils literal notranslate"><span class="pre">vertex</span></code> interpolation will be applied per instance. Like scenegraph instancing, you can introduce a lot of diversity in your point instances by using prototypes that read primvars.</p>
<p>In the case of our packing peanut example, our packing peanut asset’s material network may read from a <code class="docutils literal notranslate"><span class="pre">primvars:peanut_color</span></code> primvar. Authoring this primvar on our PointInstancer could enable us to make each peanut a different color if we wanted to.</p>
<div class="highlight-usda notranslate"><div class="highlight"><pre><span></span><span class="c1">#usda 1.0</span>
<span class="p">(</span>
<span class="w">    </span><span class="n n-Builtins">defaultPrim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;World&quot;</span>
<span class="w">    </span>metersPerUnit<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.01</span><span class="w">    </span>
<span class="w">    </span><span class="n n-Builtins">upAxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Z&quot;</span>
<span class="p">)</span>
<span class="k k-Tokens">over</span><span class="w"> </span><span class="s">&quot;PackingPeanuts&quot;</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">color3f[]</span><span class="w"> </span><span class="na">primvars:peanut_color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...](</span>
<span class="w">        </span><span class="n n-Builtins">interpolation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;vertex&quot;</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="introducing-new-prototypes">
<h2>Introducing New Prototypes<a class="headerlink" href="#introducing-new-prototypes" title="Link to this heading">#</a></h2>
<p>If you want to introduce more variety into a PointInstancer with additional prototypes, point instancing’s explicit prototype pattern requires a bit more work than scenegraph instancing. You will need to:</p>
<ol class="arabic simple">
<li><p>Define an additional prim hierarchy for the new prototype.</p></li>
<li><p>Add the new prototype to the <code class="docutils literal notranslate"><span class="pre">prototypes</span></code> relationship.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">protoIndices</span></code> to specify which instances should use the new prototype.</p></li>
</ol>
</section>
<section id="refinement-using-visibility-and-deactivation">
<h2>Refinement Using Visibility and Deactivation<a class="headerlink" href="#refinement-using-visibility-and-deactivation" title="Link to this heading">#</a></h2>
<p>At any point downstream, you can refine your PointInstancer by pruning or hiding instances using <code class="docutils literal notranslate"><span class="pre">inactiveIds</span></code> metadata and <code class="docutils literal notranslate"><span class="pre">invisibleIds</span></code> attribute respectively.</p>
<figure class="align-default" id="id1">
<video controls autoplay loop width="100%"><source src="../_images/inactiveids.mp4" type="video/webm">Your browser does not support the video tag.</video><figcaption>
<p><span class="caption-text">Deactivating packing peanuts that fell out of the box after the physics simulation process.</span><a class="headerlink" href="#id1" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>A good rule of thumb is that if you need to animate an instance on and off over time, you should use <code class="docutils literal notranslate"><span class="pre">invisibleIds</span></code>, otherwise, use <code class="docutils literal notranslate"><span class="pre">inactiveIds</span></code>. A nice feature of <code class="docutils literal notranslate"><span class="pre">inactiveIds</span></code> is that it can be list-edited so you can sparsely add and remove ids.</p>
</section>
<section id="refinement-using-promotion">
<h2>Refinement Using Promotion<a class="headerlink" href="#refinement-using-promotion" title="Link to this heading">#</a></h2>
<p>Promotion in this case is what we call turning a point instance into a full-fledged subgraph on the stage so you can override it more intuitively.</p>
<figure class="align-default" id="id2">
<video controls autoplay loop width="100%"><source src="../_images/point-instance-promotion.mp4" type="video/webm">Your browser does not support the video tag.</video><figcaption>
<p><span class="caption-text">Promoting a point instance.</span><a class="headerlink" href="#id2" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>In this example, maybe we’re creating a commercial and we want to turn a packing peanut into an animated character. We can use <code class="docutils literal notranslate"><span class="pre">inactiveIds</span></code> to deactivate the point instance that will be replaced by the character and then reference the character into the same position. Now we can animate and override the referenced character as we see fit.</p>
</section>
<section id="exercise-refining-point-instances">
<h2>Exercise: Refining Point Instances<a class="headerlink" href="#exercise-refining-point-instances" title="Link to this heading">#</a></h2>
<section id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h3>
<p>In this exercise, you will learn three key techniques for refining point instances: deactivating instances to prune them, promoting instances to fully editable assets, and using primvars to add shading diversity. You’ll explore how these techniques allow you to introduce variety and control into your PointInstancer while maintaining performance benefits, giving you the flexibility to customize individual instances when needed.</p>
</section>
<section id="exploring-the-point-instancer-scenario">
<h3>Exploring the Point Instancer Scenario<a class="headerlink" href="#exploring-the-point-instancer-scenario" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><strong>Run</strong> in the terminal:</p></li>
</ol>
<p>Windows:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">.\</span><span class="n">scripts</span><span class="p">\</span><span class="n">usdview</span><span class="p">.</span><span class="n">bat</span> <span class="p">.\</span><span class="n">instancing</span><span class="p">\</span><span class="n">ex_pt_refine</span><span class="p">\</span><span class="n">Scenario</span><span class="p">.</span><span class="n">usd</span> <span class="p">-</span><span class="n">-camera</span> <span class="n">ExCam_01</span>
</pre></div>
</div>
<p>Linux:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./scripts/usdview.sh<span class="w"> </span>./instancing/ex_pt_refine/Scenario.usd<span class="w"> </span>--camera<span class="w"> </span>ExCam_01
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Click</strong> <em>Camera &gt; Select Camera &gt; ExCam_01</em> if you ever lose your place in the scene or want to get back to this camera position.</p>
</div>
<p>In the horizontal center of the Viewport, there is a box just in front of a pallet. This is the point that we want to prune. We know ahead of time that this is index <code class="docutils literal notranslate"><span class="pre">1228</span></code> in our PointInstancer arrays.</p>
<p><img alt="" src="../_images/to-prune.png" /></p>
</section>
<section id="deactivating-point-instances">
<h3>Deactivating Point Instances<a class="headerlink" href="#deactivating-point-instances" title="Link to this heading">#</a></h3>
<ol class="arabic simple" start="2">
<li><p><strong>Click</strong> <em>Window &gt; Interpreter</em> to open the Interpreter window.</p></li>
<li><p><strong>Run</strong> the following code in the Interpreter window:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">stage</span> <span class="o">=</span> <span class="n">usdviewApi</span><span class="o">.</span><span class="n">stage</span>
<span class="linenos">2</span><span class="n">prim</span> <span class="o">=</span> <span class="n">stage</span><span class="o">.</span><span class="n">GetPrimAtPath</span><span class="p">(</span><span class="s2">&quot;/World/Scatter&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">pi</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="o">.</span><span class="n">PointInstancer</span><span class="p">(</span><span class="n">prim</span><span class="p">)</span>
<span class="linenos">4</span><span class="n">pi</span><span class="o">.</span><span class="n">DeactivateId</span><span class="p">(</span><span class="mi">1228</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="../_images/box-pruned.png" /></p>
<p>You should notice that the box we called out disappeared. This code deactivates the given ID from the PointInstancer. This authors metadata on the PointInstancer that indicates that the given point should be pruned entirely.</p>
</section>
<section id="promoting-point-instances">
<h3>Promoting Point Instances<a class="headerlink" href="#promoting-point-instances" title="Link to this heading">#</a></h3>
<p>What if we didn’t want to prune this point, but wanted to promote it instead into a fully editable asset. Promotion starts with pruning, but then you replace the pruned point with the full asset. Let’s run some code to reference a new asset and place it in the same place as our pruned point. We will continue with point <code class="docutils literal notranslate"><span class="pre">1228</span></code> for this part.</p>
<ol class="arabic simple" start="4">
<li><p><strong>Run</strong> the following code in the Interpreter window:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="linenos">2</span><span class="n">box</span> <span class="o">=</span> <span class="n">stage</span><span class="o">.</span><span class="n">DefinePrim</span><span class="p">(</span><span class="s2">&quot;/World/CubeBox_A04_26cm_01&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">stage_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">stage</span><span class="o">.</span><span class="n">GetRootLayer</span><span class="p">()</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
<span class="linenos">4</span><span class="n">box_asset_path</span> <span class="o">=</span> <span class="n">stage_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;src_assets&quot;</span> <span class="o">/</span> <span class="s2">&quot;Assets&quot;</span> <span class="o">/</span> <span class="s2">&quot;Components&quot;</span> <span class="o">/</span> <span class="s2">&quot;CubeBox_A04_26cm&quot;</span> <span class="o">/</span> <span class="s2">&quot;CubeBox_A04_26cm.usd&quot;</span>
<span class="linenos">5</span><span class="n">box</span><span class="o">.</span><span class="n">GetReferences</span><span class="p">()</span><span class="o">.</span><span class="n">AddReference</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">box_asset_path</span><span class="p">))</span>
<span class="linenos">6</span><span class="n">box_xform</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="o">.</span><span class="n">Xformable</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
<span class="linenos">7</span><span class="n">box_xform</span><span class="o">.</span><span class="n">GetTranslateOp</span><span class="p">()</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">pi</span><span class="o">.</span><span class="n">GetPositionsAttr</span><span class="p">()</span><span class="o">.</span><span class="n">Get</span><span class="p">()[</span><span class="mi">1228</span><span class="p">])</span>
<span class="linenos">8</span><span class="n">box_xform</span><span class="o">.</span><span class="n">AddOrientOp</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="n">UsdGeom</span><span class="o">.</span><span class="n">XformOp</span><span class="o">.</span><span class="n">PrecisionHalf</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">pi</span><span class="o">.</span><span class="n">GetOrientationsAttr</span><span class="p">()</span><span class="o">.</span><span class="n">Get</span><span class="p">()[</span><span class="mi">1228</span><span class="p">])</span>
</pre></div>
</div>
<p>The box looks just like it did before in the Viewport, but now we have a new prim hierarchy in the scenegraph where we can author new opinions to manipulate this asset.</p>
<p><img alt="" src="../_images/promotion.png" /></p>
</section>
<section id="using-primvars-for-shading-diversity">
<h3>Using Primvars for Shading Diversity<a class="headerlink" href="#using-primvars-for-shading-diversity" title="Link to this heading">#</a></h3>
<p>Now let’s look at a third refinement option using primvars. In this case, we’re going to use <code class="docutils literal notranslate"><span class="pre">primvars:cleanness</span></code> this is a custom primvar that we created for the CubeBox_A04_26cm asset ahead of time. It’s the same primvar used for <a class="reference internal" href="refining-scenegraph-instances/scenegraph-hierarchical-refinement.html#exercise-hierarchical-refinement-using-primvars"><span class="std std-ref">Exercise: Hierarchical Refinement Using Primvars</span></a> to change how clean a box appears.</p>
<ol class="arabic simple" start="5">
<li><p><strong>Run</strong> the following code in the Interpreter window:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="linenos">2</span><span class="n">pv_api</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="o">.</span><span class="n">PrimvarsAPI</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">cleanness</span> <span class="o">=</span> <span class="n">pv_api</span><span class="o">.</span><span class="n">CreatePrimvar</span><span class="p">(</span><span class="s2">&quot;cleanness&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">FloatArray</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="o">.</span><span class="n">Tokens</span><span class="o">.</span><span class="n">vertex</span><span class="p">)</span>
<span class="linenos">4</span><span class="n">cleanness</span><span class="o">.</span><span class="n">Set</span><span class="p">([</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">)])</span>
</pre></div>
</div>
<p>This code creates <code class="docutils literal notranslate"><span class="pre">primvars:cleanness</span></code> on our PointInstancer, but it uses “vertex” for the variability. What this means is that each item in our array will be assigned to a different PointInstancer point. We’re using the <code class="docutils literal notranslate"><span class="pre">random</span></code> library to set 2000 random values.</p>
<p>But nothing changed in the viewport. This is because primvars are inherited, but only if a value hasn’t been set by a descendant. The descendant opinion on the prototype that we referenced is stronger than ancestor opinion of the PointInstancer.</p>
<ul class="simple">
<li><p>World</p>
<ul>
<li><p>Scatter (weaker)</p>
<ul>
<li><p>Prototypes</p>
<ul>
<li><p>CubeBox_A04_26cm (stronger)</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Fortunately, we can block the prototype’s opinion to complete our task.</p>
<p><img alt="" src="../_images/blocking-opinion.png" /></p>
<ol class="arabic simple" start="6">
<li><p><strong>Run</strong> the following code in the Interpreter window:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">box_proto</span> <span class="o">=</span> <span class="n">stage</span><span class="o">.</span><span class="n">GetPrimAtPath</span><span class="p">(</span><span class="s2">&quot;/World/Scatter/Prototypes/CubeBox_A04_26cm&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="n">box_proto</span><span class="o">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s2">&quot;primvars:cleanness&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">Block</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="" src="../_images/pi-primvar.png" /></p>
<p>Now you should see the varying degrees of dirtiness on the scattered boxes.</p>
<ol class="arabic simple" start="7">
<li><p><strong>Close</strong> usdview.</p></li>
</ol>
</section>
<section id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h3>
<p>You’ve successfully learned three key techniques for refining point instances: deactivating instances to prune them, promoting instances to fully editable assets, and using primvars to add shading diversity. These techniques give you the flexibility to customize individual instances when needed while maintaining the performance benefits of PointInstancer, making it an ideal solution for large-scale scenes that require both efficiency and control.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="authoring-point-instancing/exercise-authoring-point-instancing.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Exercise: Authoring Point Instancing</p>
      </div>
    </a>
    <a class="right-next"
       href="instancing-faq.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">OpenUSD Instancing Frequently Asked Questions</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            


              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#refinement-using-primvars">Refinement Using Primvars</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introducing-new-prototypes">Introducing New Prototypes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#refinement-using-visibility-and-deactivation">Refinement Using Visibility and Deactivation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#refinement-using-promotion">Refinement Using Promotion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-refining-point-instances">Exercise: Refining Point Instances</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exploring-the-point-instancer-scenario">Exploring the Point Instancer Scenario</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deactivating-point-instances">Deactivating Point Instances</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#promoting-point-instances">Promoting Point Instances</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-primvars-for-shading-diversity">Using Primvars for Shading Diversity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            

          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
<a class="footer-brand logo" href="https://www.nvidia.com">
  <img src="../_static/nvidia-logo-horiz-rgb-1c-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA"/>
  <img src="../_static/nvidia-logo-horiz-rgb-1c-wht-for-screen.svg" class="logo__image only-dark" alt="NVIDIA"/>
</a></div>
      
        <div class="footer-item">

<div class="footer-links">
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-policy/">Privacy Policy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-center/">Manage My Privacy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/preferences/start/">Do Not Sell or Share My Data</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/terms-of-service/">Terms of Service</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/accessibility/">Accessibility</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/company-policies/">Corporate Policies</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/product-security/">Product Security</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/contact/">Contact</a>
  
  
  
</div>
</div>
      
        <div class="footer-item">




  <p class="copyright">
    
      Copyright © 2025 NVIDIA CORPORATION &amp; AFFILIATES. All rights reserved.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
<div class="extra_footer">
  
  
    <script type="text/javascript">if (typeof _satellite !== "undefined") {_satellite.pageBottom();}</script>
    
  
</div></div>
      
    </div>
  
  
  
</div>

  </footer>
  </body>
</html>