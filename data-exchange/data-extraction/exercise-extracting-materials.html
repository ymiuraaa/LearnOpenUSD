

<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Exercise: Extracting Materials &#8212; Learn OpenUSD</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/nvidia-sphinx-theme.css?v=df3ac72c" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/lousd_custom.css?v=9deb43b2" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=ca842793"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'data-exchange/data-extraction/exercise-extracting-materials';</script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Asset Validation" href="../asset-validation/index.html" />
    <link rel="prev" title="Exercise: Extracting Geometry" href="exercise-extracting-geometry.html" />

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />


    <script src="https://assets.adobedtm.com/5d4962a43b79/c1061d2c5e7b/launch-191c2462b890.min.js" ></script>
    


  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="Learn OpenUSD - Home"/>
    <img src="../../_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="Learn OpenUSD - Home"/>
  
  
    <p class="title logo__title">Learn OpenUSD</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/NVIDIA-Omniverse/LearnOpenUSD" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        



  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="Learn OpenUSD - Home"/>
    <img src="../../_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="Learn OpenUSD - Home"/>
  
  
    <p class="title logo__title">Learn OpenUSD</p>
  
</a>


  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/NVIDIA-Omniverse/LearnOpenUSD" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">



<nav class="bd-docs-nav bd-links"
     aria-label="Table of Contents">
  <p class="bd-links__title" role="heading" aria-level="1">Table of Contents</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../what-openusd/index.html">What Is OpenUSD?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../why-openusd-developer-certification.html">Why Get Certified</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../stage-setting/index.html">Setting the Stage</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../stage-setting/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stage-setting/stage.html">Stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stage-setting/prims.html">Prims</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../stage-setting/properties/index.html">Properties</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../stage-setting/properties/attributes.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stage-setting/properties/relationships.html">Relationships</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../stage-setting/timecodes-timesamples.html">TimeCodes and TimeSamples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stage-setting/prim-property-paths.html">Prim and Property Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stage-setting/usd-file-formats.html">OpenUSD File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stage-setting/usd-modules.html">OpenUSD Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stage-setting/metadata.html">Metadata</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../scene-description-blueprints/index.html">Scene Description Blueprints</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../scene-description-blueprints/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scene-description-blueprints/schemas.html">Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scene-description-blueprints/scope.html">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scene-description-blueprints/xform.html">Xform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scene-description-blueprints/xformcommonapi.html">XformCommonAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scene-description-blueprints/lights.html">Lights</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../composition-basics/index.html">Composition Basics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../composition-basics/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../composition-basics/layers.html">Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../composition-basics/strength-ordering.html">Composition Arcs and Strength Ordering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../composition-basics/specifiers.html">Specifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../composition-basics/references.html">Referencing Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../composition-basics/default-prim.html">Default Prim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../composition-basics/variant-sets.html">Variant Sets Basics</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../beyond-basics/index.html">Beyond the Basics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../beyond-basics/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beyond-basics/primvars.html">Primvars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beyond-basics/value-resolution.html">Value Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beyond-basics/custom-properties.html">Custom Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beyond-basics/active-inactive-prims.html">Active and Inactive Prims</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beyond-basics/model-kinds.html">Model Kinds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beyond-basics/stage-traversal.html">Stage Traversal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beyond-basics/hydra.html">Hydra</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../creating-composition-arcs/index.html">Creating Composition Arcs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../creating-composition-arcs/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../creating-composition-arcs/setup.html">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../creating-composition-arcs/prim-composition.html">What Is Prim Composition?</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../creating-composition-arcs/sublayers/index.html">Sublayers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/sublayers/what-are-sublayers.html">What Are Sublayers?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/sublayers/working-with-sublayers.html">Exercise: Working with Sublayers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/sublayers/sublayers-faq.html">Sublayers FAQ</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../creating-composition-arcs/references-payloads/index.html">References and Payloads</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/references-payloads/what-are-references.html">What Are References?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/references-payloads/working-with-references.html">Exercise: Working With References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/references-payloads/references-faq.html">References FAQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/references-payloads/what-are-payloads.html">What Are Payloads?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/references-payloads/working-with-payloads.html">Exercise: Working With Payloads</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../creating-composition-arcs/encapsulation/index.html">Encapsulation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/encapsulation/what-is-encapsulation.html">What Is Encapsulation?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/encapsulation/experimenting-with-encapsulation.html">Exercise: Experimenting With Encapsulation</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../creating-composition-arcs/variant-sets/index.html">Variant Sets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/variant-sets/what-are-variant-sets.html">What Are Variant Sets?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/variant-sets/working-with-variant-sets.html">Exercise: Working With Variant Sets</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../creating-composition-arcs/inherits-specializes/index.html">Inherits and Specializes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/inherits-specializes/what-is-inherits.html">What Is Inherits?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/inherits-specializes/experimenting-with-inherits.html">Exercise: Experimenting With Inherits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/inherits-specializes/what-is-specializes.html">What Is Specializes?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/inherits-specializes/experimenting-with-specializes.html">Exercise: Experimenting With Specializes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/inherits-specializes/encapsulation-refinement.html">Encapsulation and Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/inherits-specializes/experimenting-with-encapsulation-refinement.html">Exercise: Experimenting With Encapsulation and Refinement</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../creating-composition-arcs/strength-ordering/index.html">LIVERPS Strenth Ordering</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/strength-ordering/what-is-liverps.html">What Is LIVERPS?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../creating-composition-arcs/strength-ordering/tracing-through-liverps.html">Tracing Through LIVERPS</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../asset-structure/index.html">Asset Structure Principles and Content Aggregation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../asset-structure/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset-structure/setup.html">Setup</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-structure/asset-structure-principles/index.html">Principles of Asset Structure</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-structure-principles/why-necessary.html">Why Is an Asset Structure Necessary?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-structure-principles/asset-interface-pt1.html">What Is an Asset Interface?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-structure-principles/your-first-asset.html">Exercise: Your First Asset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-structure-principles/asset-interface-pt2.html">What Is an Asset Interface? (Part 2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-structure-principles/encapsulating-your-asset.html">Exercise: Encapsulating Your Asset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-structure-principles/asset-interface-pt3.html">What Is an Asset Interface? (Part 3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-structure-principles/organizing-prim-hierarchy.html">Exercise: Organizing Prim Hierarchy</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-structure/workstreams/index.html">Workstreams</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/workstreams/modeling-workstreams.html">Modeling Workstreams With Layer Stacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/workstreams/adding-user-workstreams.html">Exercise: Adding User Workstreams</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-structure/asset-parameterization/index.html">Asset Parameterization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-parameterization/what-is-asset-parameterization.html">What Is Asset Parameterization?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/asset-parameterization/exercise-asset-parameterization.html">Exercise: Asset Parameterization</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-structure/reference-payload-pattern/index.html">Reference/Payload Pattern</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/reference-payload-pattern/what-is-ref-payload-pattern.html">What Is Reference/Payload Pattern?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/reference-payload-pattern/exercise-ref-payload-pattern.html">Exercise: Reference/Payload Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/reference-payload-pattern/lofting-primvars.html">Exercise: Lofting Primvars</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/reference-payload-pattern/lofting-variant-sets.html">Exercise: Lofting Variant Sets</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-structure/model-hierarchy/index.html">Model Hierarchy</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/model-hierarchy/what-are-model-kinds.html">What Are Model Kinds?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/model-hierarchy/exercise-components.html">Exercise: Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/model-hierarchy/exercise-assemblies.html">Exercise: Assemblies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/model-hierarchy/model-hierarchy-considerations.html">Model Hierarchy Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/model-hierarchy/exercise-groups.html">Exercise: Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-structure/model-hierarchy/exercise-variation-workstream.html">Exercise: Variation Workstream</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Developing Data Exchange Pipelines</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html">Setup</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data-exchange/index.html">Data Exchange</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/what-is-data-exchange.html">What Is Data Exchange?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-exchange/exercise.html">Exercise: Anatomy of a Converter</a></li>
</ul>
</details></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">Data Extraction</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="what-is-data-extraction.html">What Is Data Extraction?</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercise-extracting-geometry.html">Exercise: Extracting Geometry</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Exercise: Extracting Materials</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../asset-validation/index.html">Asset Validation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../asset-validation/what-is-asset-validation.html">What Is Asset Validation?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asset-validation/exercise-asset-validation-testing.html">Exercise: Asset Validation and Testing</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data-transformation/index.html">Data Transformation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../data-transformation/what-is-data-transformation.html">What Is Data Transformation?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-transformation/transformation-hierarchy.html">Exercise: Transforming the Prim Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-transformation/exercise-export-option.html">Exercise: Adding an Export Option</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../asset-modularity-instancing/index.html">Asset Modularity and Instancing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../asset-modularity-instancing/index.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset-modularity-instancing/setup.html">Setup</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-modularity-instancing/asset-modularity/index.html">Asset Modularity</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/asset-modularity/what-is-asset-modularity.html">What Is Asset Modularity?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/asset-modularity/exercise-assets-overview.html">Exercise: Assets Overview</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset-modularity-instancing/what-is-instancing.html">What Is Instancing?</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-modularity-instancing/authoring-scenegraph-instancing/index.html">Authoring Scenegraph Instancing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/authoring-scenegraph-instancing/scenegraph-instancing-intro.html">Introduction to Scenegraph Instancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/authoring-scenegraph-instancing/exercise-authoring-scenegraph-instancing.html">Exercise: Author Scenegraph Instancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/authoring-scenegraph-instancing/nested-instancing.html">Nested Instancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/authoring-scenegraph-instancing/exercise-nested-instancing.html">Exercise: Nested Scenegraph Instancing</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-modularity-instancing/refining-scenegraph-instances/index.html">Refining Scenegraph Instances</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/refining-scenegraph-instances/scenegraph-instance-refinement.html">Introduction to Scenegraph Instance Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/refining-scenegraph-instances/scenegraph-deinstance-refinement.html">Deinstancing Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/refining-scenegraph-instances/scenegraph-variant-set-refinement.html">Refinement Using Variant Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/refining-scenegraph-instances/scenegraph-hierarchical-refinement.html">Hierarchical Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/refining-scenegraph-instances/scenegraph-ad-hoc-arcs-refinement.html">Ad Hoc Arcs Refinement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/refining-scenegraph-instances/scenegraph-broadcasted-refinement.html">Broadcasted Refinement</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../asset-modularity-instancing/authoring-point-instancing/index.html">Authoring Point Instancing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/authoring-point-instancing/point-instancing-intro.html">Introduction to Point Instancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../asset-modularity-instancing/authoring-point-instancing/exercise-authoring-point-instancing.html">Exercise: Authoring Point Instancing</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset-modularity-instancing/refining-point-instances.html">Refining Point Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset-modularity-instancing/instancing-faq.html">Instancing FAQ</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Common Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../usdview-install-instructions.html">Installing usdview and Setting Up Python</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Involved</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://github.com/NVIDIA-Omniverse/LearnOpenUSD">Contribute</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NVIDIA-Omniverse/LearnOpenUSD/issues/new">Report an Issue</a></li>
<li class="toctree-l1"><a class="reference external" href="https://forum.aousd.org">Join the Community</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>



      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Developing Data Exchange Pipelines</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Data Extraction</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Exercise: Extracting Materials</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="exercise-extracting-materials">
<h1>Exercise: Extracting Materials<a class="headerlink" href="#exercise-extracting-materials" title="Link to this heading">#</a></h1>
<p>Similar to how we extracted the geometry from our <code class="docutils literal notranslate"><span class="pre">.obj</span></code> file, we will now extract the materials. This is the last part of the code that we will be adding to <code class="docutils literal notranslate"><span class="pre">extract()</span></code>.</p>
<ol class="arabic simple">
<li><p>At the top of our file, add <code class="docutils literal notranslate"><span class="pre">Gf</span></code>, <code class="docutils literal notranslate"><span class="pre">Sdf</span></code>, and <code class="docutils literal notranslate"><span class="pre">UsdShade</span></code> imports from <code class="docutils literal notranslate"><span class="pre">pxr</span></code>.</p></li>
</ol>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">pxr</span><span class="w"> </span><span class="kn">import</span> <span class="n">Gf</span><span class="p">,</span> <span class="n">Sdf</span><span class="p">,</span> <span class="n">Tf</span><span class="p">,</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">UsdShade</span>
</pre></div>
</div>
<p>Here we’ll sanitize the material identifiers as we did with the meshes. Then we’ll set up the initial shaders.</p>
<ol class="arabic simple" start="2">
<li><p>Let’s get each material from the mesh. Add the following code to get the material and check if it exists before creating the identifier. This will slot underneath where we defined our <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">mesh.normals</span></code> but not inside the if statement.</p></li>
</ol>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Get the mesh&#39;s material by index</span>
<span class="linenos">2</span><span class="c1"># scene.materials is a dictionary consisting of assimp material properties</span>
<span class="linenos">3</span><span class="n">mtl</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mesh</span><span class="o">.</span><span class="n">material_index</span><span class="p">]</span>
<span class="linenos">4</span><span class="k">if</span> <span class="ow">not</span> <span class="n">mtl</span><span class="p">:</span>
<span class="linenos">5</span>    <span class="k">continue</span>
<span class="linenos">6</span><span class="n">sanitized_mat_name</span> <span class="o">=</span> <span class="n">Tf</span><span class="o">.</span><span class="n">MakeValidIdentifier</span><span class="p">(</span><span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;NAME&quot;</span><span class="p">])</span>
<span class="linenos">7</span><span class="n">material_path</span> <span class="o">=</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">sanitized_mat_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Next, we will create the material prim in our stage that has a shader surface for the material graph. Add the following code underneath <code class="docutils literal notranslate"><span class="pre">material_path</span></code>.</p></li>
</ol>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Create the material prim</span>
<span class="linenos">2</span><span class="n">material</span><span class="p">:</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Material</span> <span class="o">=</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Material</span><span class="o">.</span><span class="n">Define</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">material_path</span><span class="p">)</span>
<span class="linenos">3</span><span class="c1"># Create a UsdPreviewSurface Shader prim.</span>
<span class="linenos">4</span><span class="n">shader</span><span class="p">:</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Shader</span> <span class="o">=</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Shader</span><span class="o">.</span><span class="n">Define</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">material_path</span><span class="o">.</span><span class="n">AppendChild</span><span class="p">(</span><span class="s2">&quot;Shader&quot;</span><span class="p">))</span>
<span class="linenos">5</span><span class="n">shader</span><span class="o">.</span><span class="n">CreateIdAttr</span><span class="p">(</span><span class="s2">&quot;UsdPreviewSurface&quot;</span><span class="p">)</span>
<span class="linenos">6</span><span class="c1"># Connect shader surface output as an output for the material graph.</span>
<span class="linenos">7</span><span class="n">material</span><span class="o">.</span><span class="n">CreateSurfaceOutput</span><span class="p">()</span><span class="o">.</span><span class="n">ConnectToSource</span><span class="p">(</span><span class="n">shader</span><span class="o">.</span><span class="n">ConnectableAPI</span><span class="p">(),</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Tokens</span><span class="o">.</span><span class="n">surface</span><span class="p">)</span>
</pre></div>
</div>
<p>First, we get the material info from Assimp using the material index stored with the mesh. You’ll notice that we ensure we’re using a valid identifier for the material name. With the valid material name, we create the <code class="docutils literal notranslate"><span class="pre">UsdShade.Material</span></code> and <code class="docutils literal notranslate"><span class="pre">UsdShade.Shader</span></code>.</p>
<p>The material prim serves as a container for a material graph. In this case, we have just one node in our material graph, a <code class="docutils literal notranslate"><span class="pre">UsdPreviewSurface</span></code> shader. Lastly, we loft the material graph output by connecting the <code class="docutils literal notranslate"><span class="pre">outputs:surface</span></code> from the shader prim to the material prim.</p>
<ol class="arabic simple" start="4">
<li><p>Save the file and execute the script by running the following in the terminal.</p></li>
</ol>
<p>Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">.</span>\<span class="n">data_exchange</span>\<span class="n">obj2usd</span><span class="o">.</span><span class="n">py</span> <span class="o">.</span>\<span class="n">data_exchange</span>\<span class="n">shapes</span><span class="o">.</span><span class="n">obj</span>

</pre></div>
</div>
<p>Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">./</span><span class="n">data_exchange</span><span class="o">/</span><span class="n">obj2usd</span><span class="o">.</span><span class="n">py</span> <span class="o">./</span><span class="n">data_exchange</span><span class="o">/</span><span class="n">shapes</span><span class="o">.</span><span class="n">obj</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Open the output USD stage with usdview to see the result.</p></li>
</ol>
<p>Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span>\<span class="n">scripts</span>\<span class="n">usdview</span><span class="o">.</span><span class="n">bat</span> <span class="o">.</span>\<span class="n">data_exchange</span>\<span class="n">shapes</span><span class="o">.</span><span class="n">usda</span>
</pre></div>
</div>
<p>Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">usdview</span><span class="o">.</span><span class="n">sh</span> <span class="o">./</span><span class="n">data_exchange</span><span class="o">/</span><span class="n">shapes</span><span class="o">.</span><span class="n">usda</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>With usdview open, click on the <code class="docutils literal notranslate"><span class="pre">Material_001</span></code> prim in the stage tree and expand <code class="docutils literal notranslate"><span class="pre">outputs:surface</span></code> in the <em>Properties</em> window.</p></li>
</ol>
<p><img alt="" src="../../_images/image341.png" /></p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you don’t see the following in usdview, make sure <strong>Default Dome Light</strong> is enabled. You can enable it by going to <strong>Lights &gt; Enable Default Dome Light</strong>.</p>
</div>
<p><img alt="" src="../../_images/image412.png" /></p>
<p>We’ve defined the material graph and primary shader for each material, but at this point, you shouldn’t see any visual difference in the viewport.</p>
<p>One point of interest is that the material names were fixed in this case with <code class="docutils literal notranslate"><span class="pre">Tf.MakeValidIdentifier()</span></code> since this OBJ was authored in Blender with material names in the format: “Material.001”. The invalid character, the period, was replaced with an underscore. You can open the OBJ file in VS Code to see the original material names. Additionally, the expanded <code class="docutils literal notranslate"><span class="pre">outputs:surface</span></code> property on the material prim shows the connection to the shader prim.</p>
<ol class="arabic simple" start="7">
<li><p>Next, let’s map the material properties from OBJ to the <code class="docutils literal notranslate"><span class="pre">UsdPreviewSurface</span></code> shader. Copy and paste this code below where we created our shaders.</p></li>
</ol>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Get colors</span>
<span class="linenos"> 2</span><span class="n">diffuse_color</span> <span class="o">=</span> <span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;COLOR_DIFFUSE&quot;</span><span class="p">]</span>
<span class="linenos"> 3</span><span class="n">emissive_color</span> <span class="o">=</span> <span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;COLOR_EMISSIVE&quot;</span><span class="p">]</span>
<span class="linenos"> 4</span><span class="n">specular_color</span> <span class="o">=</span> <span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;COLOR_SPECULAR&quot;</span><span class="p">]</span>
<span class="linenos"> 5</span><span class="c1"># Convert specular shininess to roughness.</span>
<span class="linenos"> 6</span><span class="n">roughness</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;SHININESS&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;useSpecularWorkflow&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Int</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;diffuseColor&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Color3f</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">Gf</span><span class="o">.</span><span class="n">Vec3f</span><span class="p">(</span><span class="n">diffuse_color</span><span class="p">))</span>
<span class="linenos">10</span><span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;emissiveColor&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Color3f</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">Gf</span><span class="o">.</span><span class="n">Vec3f</span><span class="p">(</span><span class="n">emissive_color</span><span class="p">))</span>
<span class="linenos">11</span><span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;specularColor&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Color3f</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">Gf</span><span class="o">.</span><span class="n">Vec3f</span><span class="p">(</span><span class="n">specular_color</span><span class="p">))</span>
<span class="linenos">12</span><span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;roughness&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Float</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">roughness</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we are setting the <code class="docutils literal notranslate"><span class="pre">UsdPreviewSurface</span></code> shader to use a specular workflow instead of PBR, as it maps most directly to the data coming from OBJ. After that, we create the relevant inputs and set their values from OBJ. This will complete the material definitions, but we won’t see anything in the viewport until we bind the material to the mesh.</p>
<ol class="arabic simple" start="8">
<li><p>Let’s bind the material to the mesh. Add the following code below the shader connections, <code class="docutils literal notranslate"><span class="pre">shader.CreateInput()</span></code>.</p></li>
</ol>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">binding_api</span> <span class="o">=</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">MaterialBindingAPI</span><span class="o">.</span><span class="n">Apply</span><span class="p">(</span><span class="n">usd_mesh</span><span class="o">.</span><span class="n">GetPrim</span><span class="p">())</span>
<span class="linenos">2</span><span class="n">binding_api</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3 sd-fade-in">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-code-square" viewBox="0 0 16 16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25Zm7.47 3.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L10.69 8 9.22 6.53a.75.75 0 0 1 0-1.06ZM6.78 6.53 5.31 8l1.47 1.47a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215l-2-2a.75.75 0 0 1 0-1.06l2-2a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"></path></svg></span><span class="sd-summary-text">Click to reveal our Python code up to this point.</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="linenos">  2</span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="linenos">  3</span><span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="linenos">  4</span><span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<span class="linenos">  5</span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="linenos">  6</span>
<span class="linenos">  7</span><span class="kn">import</span><span class="w"> </span><span class="nn">assimp_py</span>
<span class="linenos">  8</span><span class="kn">from</span><span class="w"> </span><span class="nn">pxr</span><span class="w"> </span><span class="kn">import</span> <span class="n">Gf</span><span class="p">,</span> <span class="n">Sdf</span><span class="p">,</span> <span class="n">Tf</span><span class="p">,</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">UsdShade</span>
<span class="linenos">  9</span>
<span class="linenos"> 10</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;obj2usd&quot;</span><span class="p">)</span>
<span class="linenos"> 11</span>
<span class="linenos"> 12</span>
<span class="linenos"> 13</span><span class="k">class</span><span class="w"> </span><span class="nc">UpAxis</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="linenos"> 14</span>    <span class="n">Y</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="o">.</span><span class="n">Tokens</span><span class="o">.</span><span class="n">y</span>
<span class="linenos"> 15</span>    <span class="n">Z</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="o">.</span><span class="n">Tokens</span><span class="o">.</span><span class="n">z</span>
<span class="linenos"> 16</span>
<span class="linenos"> 17</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos"> 18</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
<span class="linenos"> 19</span>
<span class="linenos"> 20</span><span class="c1"># ADD CODE BELOW HERE</span>
<span class="linenos"> 21</span><span class="c1"># vvvvvvvvvvvvvvvvvvv</span>
<span class="linenos"> 22</span>
<span class="linenos"> 23</span><span class="k">def</span><span class="w"> </span><span class="nf">extract</span><span class="p">(</span><span class="n">input_file</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Usd</span><span class="o">.</span><span class="n">Stage</span><span class="p">:</span>
<span class="linenos"> 24</span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Executing extraction phase...&quot;</span><span class="p">)</span>
<span class="linenos"> 25</span>    <span class="n">process_flags</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos"> 26</span>    <span class="c1"># Load the obj using Assimp </span>
<span class="linenos"> 27</span>    <span class="n">scene</span> <span class="o">=</span> <span class="n">assimp_py</span><span class="o">.</span><span class="n">ImportFile</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">input_file</span><span class="p">),</span> <span class="n">process_flags</span><span class="p">)</span>
<span class="linenos"> 28</span>    <span class="c1"># Define the stage where the output will go </span>
<span class="linenos"> 29</span>    <span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="o">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">Usd</span><span class="o">.</span><span class="n">Stage</span><span class="o">.</span><span class="n">CreateNew</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">output_file</span><span class="p">))</span>
<span class="linenos"> 30</span>
<span class="linenos"> 31</span>    <span class="k">for</span> <span class="n">mesh</span> <span class="ow">in</span> <span class="n">scene</span><span class="o">.</span><span class="n">meshes</span><span class="p">:</span>
<span class="linenos"> 32</span>        <span class="c1"># Replace any invalid characters with underscores.</span>
<span class="linenos"> 33</span>        <span class="n">sanitized_mesh_name</span> <span class="o">=</span> <span class="n">Tf</span><span class="o">.</span><span class="n">MakeValidIdentifier</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="linenos"> 34</span>        <span class="n">usd_mesh</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="o">.</span><span class="n">Mesh</span><span class="o">.</span><span class="n">Define</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">sanitized_mesh_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos"> 35</span>        <span class="c1"># You can use the Vt APIs here instead of Python lists.</span>
<span class="linenos"> 36</span>        <span class="c1"># Especially keep this in mind for C++ implementations.</span>
<span class="linenos"> 37</span>        <span class="n">face_vertex_counts</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 38</span>        <span class="n">face_vertex_indices</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 39</span>        <span class="k">for</span> <span class="n">indices</span> <span class="ow">in</span> <span class="n">mesh</span><span class="o">.</span><span class="n">indices</span><span class="p">:</span>
<span class="linenos"> 40</span>            <span class="c1"># Convert the indices to a flat list</span>
<span class="linenos"> 41</span>            <span class="n">face_vertex_indices</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
<span class="linenos"> 42</span>            <span class="c1"># Append the number of vertices for each face</span>
<span class="linenos"> 43</span>            <span class="n">face_vertex_counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">))</span>
<span class="linenos"> 44</span>        
<span class="linenos"> 45</span>        <span class="n">usd_mesh</span><span class="o">.</span><span class="n">CreatePointsAttr</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">vertices</span><span class="p">)</span>
<span class="linenos"> 46</span>        <span class="n">usd_mesh</span><span class="o">.</span><span class="n">CreateFaceVertexCountsAttr</span><span class="p">()</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">face_vertex_counts</span><span class="p">)</span>
<span class="linenos"> 47</span>        <span class="n">usd_mesh</span><span class="o">.</span><span class="n">CreateFaceVertexIndicesAttr</span><span class="p">()</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">face_vertex_indices</span><span class="p">)</span>
<span class="linenos"> 48</span>        <span class="c1"># Treat the mesh as a polygonal mesh and not a subdivision surface.</span>
<span class="linenos"> 49</span>        <span class="c1"># Respect the normals or lack of normals from OBJ.</span>
<span class="linenos"> 50</span>        <span class="n">usd_mesh</span><span class="o">.</span><span class="n">CreateSubdivisionSchemeAttr</span><span class="p">(</span><span class="n">UsdGeom</span><span class="o">.</span><span class="n">Tokens</span><span class="o">.</span><span class="n">none</span><span class="p">)</span>
<span class="linenos"> 51</span>        <span class="k">if</span> <span class="n">mesh</span><span class="o">.</span><span class="n">normals</span><span class="p">:</span>
<span class="linenos"> 52</span>            <span class="n">usd_mesh</span><span class="o">.</span><span class="n">CreateNormalsAttr</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">normals</span><span class="p">)</span>
<span class="linenos"> 53</span>        
<span class="linenos"> 54</span>        <span class="c1"># Get the mesh&#39;s material by index</span>
<span class="linenos"> 55</span>        <span class="c1"># scene.materials is a dictionary consisting of assimp material properties</span>
<span class="linenos"> 56</span>        <span class="n">mtl</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mesh</span><span class="o">.</span><span class="n">material_index</span><span class="p">]</span>
<span class="linenos"> 57</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">mtl</span><span class="p">:</span>
<span class="linenos"> 58</span>            <span class="k">continue</span>
<span class="linenos"> 59</span>        <span class="n">sanitized_mat_name</span> <span class="o">=</span> <span class="n">Tf</span><span class="o">.</span><span class="n">MakeValidIdentifier</span><span class="p">(</span><span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;NAME&quot;</span><span class="p">])</span>
<span class="linenos"> 60</span>        <span class="n">material_path</span> <span class="o">=</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">sanitized_mat_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos"> 61</span>        <span class="c1"># Create the material prim</span>
<span class="linenos"> 62</span>        <span class="n">material</span><span class="p">:</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Material</span> <span class="o">=</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Material</span><span class="o">.</span><span class="n">Define</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">material_path</span><span class="p">)</span>
<span class="linenos"> 63</span>        <span class="c1"># Create a UsdPreviewSurface Shader prim.</span>
<span class="linenos"> 64</span>        <span class="n">shader</span><span class="p">:</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Shader</span> <span class="o">=</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Shader</span><span class="o">.</span><span class="n">Define</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">material_path</span><span class="o">.</span><span class="n">AppendChild</span><span class="p">(</span><span class="s2">&quot;Shader&quot;</span><span class="p">))</span>
<span class="linenos"> 65</span>        <span class="n">shader</span><span class="o">.</span><span class="n">CreateIdAttr</span><span class="p">(</span><span class="s2">&quot;UsdPreviewSurface&quot;</span><span class="p">)</span>
<span class="linenos"> 66</span>        <span class="c1"># Connect shader surface output as an output for the material graph.</span>
<span class="linenos"> 67</span>        <span class="n">material</span><span class="o">.</span><span class="n">CreateSurfaceOutput</span><span class="p">()</span><span class="o">.</span><span class="n">ConnectToSource</span><span class="p">(</span><span class="n">shader</span><span class="o">.</span><span class="n">ConnectableAPI</span><span class="p">(),</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">Tokens</span><span class="o">.</span><span class="n">surface</span><span class="p">)</span>
<span class="linenos"> 68</span>        <span class="c1"># Get colors</span>
<span class="linenos"> 69</span>        <span class="n">diffuse_color</span> <span class="o">=</span> <span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;COLOR_DIFFUSE&quot;</span><span class="p">]</span>
<span class="linenos"> 70</span>        <span class="n">emissive_color</span> <span class="o">=</span> <span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;COLOR_EMISSIVE&quot;</span><span class="p">]</span>
<span class="linenos"> 71</span>        <span class="n">specular_color</span> <span class="o">=</span> <span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;COLOR_SPECULAR&quot;</span><span class="p">]</span>
<span class="linenos"> 72</span>        <span class="c1"># Convert specular shininess to roughness.</span>
<span class="linenos"> 73</span>        <span class="n">roughness</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mtl</span><span class="p">[</span><span class="s2">&quot;SHININESS&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
<span class="linenos"> 74</span>
<span class="linenos"> 75</span>        <span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;useSpecularWorkflow&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Int</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 76</span>        <span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;diffuseColor&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Color3f</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">Gf</span><span class="o">.</span><span class="n">Vec3f</span><span class="p">(</span><span class="n">diffuse_color</span><span class="p">))</span>
<span class="linenos"> 77</span>        <span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;emissiveColor&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Color3f</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">Gf</span><span class="o">.</span><span class="n">Vec3f</span><span class="p">(</span><span class="n">emissive_color</span><span class="p">))</span>
<span class="linenos"> 78</span>        <span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;specularColor&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Color3f</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">Gf</span><span class="o">.</span><span class="n">Vec3f</span><span class="p">(</span><span class="n">specular_color</span><span class="p">))</span>
<span class="linenos"> 79</span>        <span class="n">shader</span><span class="o">.</span><span class="n">CreateInput</span><span class="p">(</span><span class="s2">&quot;roughness&quot;</span><span class="p">,</span> <span class="n">Sdf</span><span class="o">.</span><span class="n">ValueTypeNames</span><span class="o">.</span><span class="n">Float</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">roughness</span><span class="p">)</span>
<span class="linenos"> 80</span>        <span class="n">binding_api</span> <span class="o">=</span> <span class="n">UsdShade</span><span class="o">.</span><span class="n">MaterialBindingAPI</span><span class="o">.</span><span class="n">Apply</span><span class="p">(</span><span class="n">usd_mesh</span><span class="o">.</span><span class="n">GetPrim</span><span class="p">())</span>
<span class="linenos"> 81</span>        <span class="n">binding_api</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
<span class="linenos"> 82</span>
<span class="linenos"> 83</span>    <span class="k">return</span> <span class="n">stage</span>
<span class="linenos"> 84</span>
<span class="linenos"> 85</span>
<span class="linenos"> 86</span><span class="k">def</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span><span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="o">.</span><span class="n">Stage</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">):</span>
<span class="linenos"> 87</span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Executing transformation phase...&quot;</span><span class="p">)</span>
<span class="linenos"> 88</span>
<span class="linenos"> 89</span>
<span class="linenos"> 90</span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">):</span>
<span class="linenos"> 91</span>    <span class="c1"># Extract the .obj</span>
<span class="linenos"> 92</span>    <span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="o">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">extract</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
<span class="linenos"> 93</span>    <span class="c1"># Transformations to be applied to the scene hierarchy</span>
<span class="linenos"> 94</span>    <span class="n">transform</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
<span class="linenos"> 95</span>    <span class="c1"># Save the Stage after editing</span>
<span class="linenos"> 96</span>    <span class="n">stage</span><span class="o">.</span><span class="n">Save</span><span class="p">()</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span><span class="c1"># ^^^^^^^^^^^^^^^^^^^^</span>
<span class="linenos"> 99</span><span class="c1"># ADD CODE ABOVE HERE</span>
<span class="linenos">100</span>
<span class="linenos">101</span>
<span class="linenos">102</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">103</span>    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="linenos">104</span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
<span class="linenos">105</span>        <span class="s2">&quot;obj2usd&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An OBJ to USD converter script.&quot;</span>
<span class="linenos">106</span>    <span class="p">)</span>
<span class="linenos">107</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Input OBJ file&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">Path</span><span class="p">)</span>
<span class="linenos">108</span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="s2">&quot;--output&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify an output USD file&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">Path</span><span class="p">)</span>
<span class="linenos">109</span>    <span class="n">export_opts</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s2">&quot;Export Options&quot;</span><span class="p">)</span>
<span class="linenos">110</span>    <span class="n">export_opts</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="linenos">111</span>        <span class="s2">&quot;-u&quot;</span><span class="p">,</span>
<span class="linenos">112</span>        <span class="s2">&quot;--up-axis&quot;</span><span class="p">,</span>
<span class="linenos">113</span>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify the up axis for the exported USD stage.&quot;</span><span class="p">,</span>
<span class="linenos">114</span>        <span class="nb">type</span><span class="o">=</span><span class="n">UpAxis</span><span class="p">,</span>
<span class="linenos">115</span>        <span class="n">choices</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">UpAxis</span><span class="p">),</span>
<span class="linenos">116</span>        <span class="n">default</span><span class="o">=</span><span class="n">UpAxis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span>
<span class="linenos">117</span>    <span class="p">)</span>
<span class="linenos">118</span>
<span class="linenos">119</span>    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="linenos">120</span>    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">121</span>        <span class="n">args</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s2">.usda&quot;</span>
<span class="linenos">122</span>
<span class="linenos">123</span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Converting </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
<span class="linenos">124</span>    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="linenos">125</span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Converted results output as: </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">output</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
<span class="linenos">126</span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Done.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><ol class="arabic simple" start="9">
<li><p>Save the file and execute the script by running the following in the terminal.</p></li>
</ol>
<p>Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">.</span>\<span class="n">data_exchange</span>\<span class="n">obj2usd</span><span class="o">.</span><span class="n">py</span> <span class="o">.</span>\<span class="n">data_exchange</span>\<span class="n">shapes</span><span class="o">.</span><span class="n">obj</span>
</pre></div>
</div>
<p>Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">./</span><span class="n">data_exchange</span><span class="o">/</span><span class="n">obj2usd</span><span class="o">.</span><span class="n">py</span> <span class="o">./</span><span class="n">data_exchange</span><span class="o">/</span><span class="n">shapes</span><span class="o">.</span><span class="n">obj</span>
</pre></div>
</div>
<ol class="arabic simple" start="10">
<li><p>Open the output USD stage with usdview to see the result:</p></li>
</ol>
<p>Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span>\<span class="n">scripts</span>\<span class="n">usdview</span><span class="o">.</span><span class="n">bat</span> <span class="o">.</span>\<span class="n">data_exchange</span>\<span class="n">shapes</span><span class="o">.</span><span class="n">usda</span>
</pre></div>
</div>
<p>Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">usdview</span><span class="o">.</span><span class="n">sh</span> <span class="o">./</span><span class="n">data_exchange</span><span class="o">/</span><span class="n">shapes</span><span class="o">.</span><span class="n">usda</span>
</pre></div>
</div>
<p>Now, we should see unique materials on the meshes.</p>
<p><img alt="" src="../../_images/image510.png" /></p>
<p>Notice the diffuse and specular differences between the materials. Take some time to explore the values on the different shaders and their visual results in the viewport.</p>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="exercise-extracting-geometry.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Exercise: Extracting Geometry</p>
      </div>
    </a>
    <a class="right-next"
       href="../asset-validation/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Asset Validation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            

<div class="bd-sidebar-secondary"></div>


              
            

          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
<a class="footer-brand logo" href="https://www.nvidia.com">
  <img src="../../_static/nvidia-logo-horiz-rgb-1c-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA"/>
  <img src="../../_static/nvidia-logo-horiz-rgb-1c-wht-for-screen.svg" class="logo__image only-dark" alt="NVIDIA"/>
</a></div>
      
        <div class="footer-item">

<div class="footer-links">
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-policy/">Privacy Policy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-center/">Manage My Privacy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/preferences/start/">Do Not Sell or Share My Data</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/terms-of-service/">Terms of Service</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/accessibility/">Accessibility</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/company-policies/">Corporate Policies</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/product-security/">Product Security</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/contact/">Contact</a>
  
  
  
</div>
</div>
      
        <div class="footer-item">




  <p class="copyright">
    
      Copyright © 2025 NVIDIA CORPORATION &amp; AFFILIATES. All rights reserved.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
<div class="extra_footer">
  
  
    <script type="text/javascript">if (typeof _satellite !== "undefined") {_satellite.pageBottom();}</script>
    
  
</div></div>
      
    </div>
  
  
  
</div>

  </footer>
  </body>
</html>